import{r as l,X as Y,G as _,j as e,S as $,A as d}from"./app-CWG8IO2g.js";import{L as q}from"./index-DlFJ7bMG.js";import{Q as J,F as k,B as K}from"./ReactToastify-DPvZpB58.js";import{C as W}from"./CLBreadCrumb-D2HL7VO5.js";import{C as Z,a as ee}from"./customStyle-CaZsWJdT.js";import{s as se}from"./RightSidebar-ySHiCkj3.js";import{c as S}from"./country-D2C42wJD.js";/* empty css             */import{C as ae}from"./Container--jlZg8Hy.js";import{R as re}from"./Row-V_FQxnkM.js";import{C as te}from"./Col-DCMVYQ7v.js";import{C as h}from"./Card-tM-bCJo_.js";import{F as m}from"./Form-ScOPmmIk.js";import{T as le}from"./Table-B_fHKvu_.js";import{M as o}from"./Modal-Cl8y3l_e.js";import{B as P}from"./Button-BYq_pOI0.js";import"./index-BID9k8xX.js";import"./reselect-CiXCCDx7.js";import"./Dropdown-DmSjolbV.js";import"./ThemeProvider-DQTmiaPd.js";import"./NavbarContext-D7Y69-4c.js";import"./index-NKt71_pR.js";import"./coderlity-D_SEMzZo.js";import"./avatar-6-Bjnhzl3_.js";import"./Offcanvas-B1fdAb66.js";import"./CardHeaderContext-D7wbeIzV.js";import"./FormCheckInput-D0kmCXQY.js";import"./useWillUnmount-Db1aBOWc.js";function oe({users:a,pages:R=[]}){var g,f,b,N,w;const[p,c]=l.useState(!1),[T,x]=l.useState(0),[M,i]=l.useState(!1),[U,u]=l.useState(0),{props:I}=Y(),r=I.flash||{};let B=new URL(window.location.href).searchParams.get("search")||"";const{data:t,post:F,get:L,setData:j,processing:D,put:A}=_({search:B}),O=s=>{s.preventDefault(),t.search.length>=2&&L(route("admin.user.index",{page:1,search:t.search}),{preserveState:!0,preserveScroll:!0})},E=s=>{s==="2"&&x(0),c(!1)},H=()=>{F(route("admin.user.forgotPassword",{id:U}),{preserveScroll:!0,onSuccess:()=>{i(!1),u(0)}})},V=()=>{t.search.length!==0&&(j({search:""}),d.visit(`${se}/user`,{method:"get"}))},z=s=>{A(route("admin.user.statusUpdate",s),{preserveScroll:!0})},G=s=>{K.success(s,{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:k})},Q=s=>{d.visit(route("admin.user.show",{id:s}))},X=s=>{d.visit(route("admin.user.edit",{id:s}))};return l.useEffect(()=>{if(r!=null&&r.success){const s=setTimeout(()=>{G(r==null?void 0:r.message)},200);return()=>{clearTimeout(s)}}},[r]),e.jsxs(l.Fragment,{children:[e.jsx($,{title:"Starter | Velzon - React Admin & Dashboard Template"}),e.jsxs("div",{className:"page-content",children:[e.jsxs(ae,{fluid:!0,children:[e.jsx(W,{title:"Users",pageTitle:"User Page",pageUrl:"/auth/console/user",currentPage:"Manage"}),e.jsx(re,{children:e.jsx(te,{xs:12,children:e.jsxs(h,{children:[e.jsxs(h.Header,{className:"align-items-center d-flex",children:[e.jsx("h4",{className:"mb-0 card-title flex-grow-1",children:"User Manage"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"d-flex justify-content-sm-end",children:e.jsx("form",{onSubmit:O,children:e.jsxs("div",{className:"search-box ms-2 search-box-custom-width ",children:[e.jsx(m.Control,{type:"text",className:"form-control",placeholder:"Search by name, email, country or role...",value:t.search,onChange:s=>j("search",s.target.value),disabled:D}),e.jsx("i",{className:"ri-search-line search-icon"}),((g=t==null?void 0:t.search)==null?void 0:g.length)!==0&&e.jsx("i",{className:"ri-close-line close-cl-icon text-danger",onClick:V})]})})})})]}),e.jsxs(h.Body,{children:[e.jsx("div",{className:"live-preview",children:e.jsxs("div",{className:"table-responsive",children:[e.jsxs(le,{className:"mb-0 align-middle table-bordered table-hover table-striped table-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"ID"}),e.jsx("th",{scope:"col",children:"User Name"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Country"}),e.jsx("th",{scope:"col",children:"Status"}),e.jsx("th",{scope:"col",children:"Change Status"}),e.jsx("th",{scope:"col",children:"Role"}),e.jsx("th",{scope:"col",children:"Password"}),e.jsx("th",{scope:"col",children:"Action"})]})}),e.jsxs("tbody",{children:[((f=a==null?void 0:a.data)==null?void 0:f.length)!==0&&((b=a==null?void 0:a.data)==null?void 0:b.map((s,C)=>{var v,y;return e.jsxs("tr",{children:[e.jsx("td",{className:"fw-medium",children:(a.current_page-1)*10+C+1}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsxs("td",{children:[((v=S.find(n=>n.countryName==s.country))==null?void 0:v.flagImg)&&e.jsx("img",{src:(y=S.find(n=>n.countryName==s.country))==null?void 0:y.flagImg,alt:"country flag",className:"options-flagimg options-flagimgTwo changebgcolor",height:"20"}),s.country]}),e.jsx("td",{children:s.status==="Active"?e.jsx("span",{className:"badge bg-success-subtle text-success",children:"Active"}):e.jsx("span",{className:"badge bg-danger-subtle text-danger",children:"Disabled"})}),e.jsx("td",{children:e.jsxs("div",{className:"form-check form-switch",children:[e.jsx(m.Check.Input,{className:"form-check-input",type:"checkbox",checked:s.status==="Disabled",onChange:()=>z(s.id),role:"switch",id:"SwitchCheck2"}),e.jsx(m.Check.Label,{className:"form-check-label ms-2",htmlFor:"SwitchCheck2",children:"Yes/No"})]})}),e.jsx("td",{children:s.role}),e.jsx("td",{className:"cursor-pointer text-primary",children:e.jsxs("span",{onClick:()=>{i(!0),u(s.id)},children:[e.jsx("i",{className:"align-middle ri-refresh-line fs-17"})," ","Reset Password"]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex-wrap gap-3 hstack",children:[e.jsx("span",{onClick:()=>Q(s.id),className:"cursor-pointer link-primary fs-15",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("span",{onClick:()=>X(s.id),className:"link-success fs-15",children:e.jsx("i",{className:"ri-edit-2-line"})}),e.jsx("span",{onClick:()=>{x(s.id),c(!p)},className:"link-danger fs-15",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},C)})),((N=a==null?void 0:a.data)==null?void 0:N.length)===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,align:"center",className:"text-center fs-6 fw-semibold",children:"No data is available for this record in the database."})})]})]}),e.jsx(Z,{modalType:"search",recordId:T,routeLink:"admin.user.destroy",modalFlip:p,handleModalState:E}),e.jsxs(o,{id:"flipModal",show:M,onHide:()=>i(!1),className:"flip",children:[e.jsx(o.Header,{closeButton:!0,children:e.jsx(o.Title,{children:"Reset Password"})}),e.jsxs(o.Body,{children:[e.jsx("h5",{className:"fs-16",children:"Do you want to reset the userâ€™s password?"}),e.jsx("p",{className:"text-muted",children:"Resetting the password will generate a new temporary password for this user. The user will need to change it after logging in. Please confirm before proceeding."})]}),e.jsxs(o.Footer,{children:[e.jsxs(P,{variant:"light",onClick:()=>i(!1),children:[" ","Close"," "]}),e.jsxs(P,{type:"button",onClick:H,variant:"primary",children:[" ","Send"," "]})]})]})]})}),((w=a==null?void 0:a.data)==null?void 0:w.length)!==0&&e.jsx("div",{className:"mt-3 d-flex justify-content-sm-end",children:e.jsx(ee,{pages:R})})]})]})})})]}),e.jsx(J,{position:"top-right",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",transition:k})]})]})}oe.layout=a=>e.jsx(q,{children:a});export{oe as default};

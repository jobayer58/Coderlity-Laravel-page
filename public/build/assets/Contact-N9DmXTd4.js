import{r as h,X as F,G as P,j as e,S as $,A as N}from"./app-CWG8IO2g.js";import{L as A}from"./index-DlFJ7bMG.js";import{Q as B,F as w,B as I}from"./ReactToastify-DPvZpB58.js";import{C as O}from"./CLBreadCrumb-D2HL7VO5.js";import{C as R,a as E}from"./customStyle-CaZsWJdT.js";import{s as U}from"./RightSidebar-ySHiCkj3.js";/* empty css             */import{C as H}from"./Container--jlZg8Hy.js";import{R as _}from"./Row-V_FQxnkM.js";import{C as V}from"./Col-DCMVYQ7v.js";import{C as u}from"./Card-tM-bCJo_.js";import{F as z}from"./Form-ScOPmmIk.js";import{T as G}from"./Table-B_fHKvu_.js";import"./index-BID9k8xX.js";import"./reselect-CiXCCDx7.js";import"./Dropdown-DmSjolbV.js";import"./ThemeProvider-DQTmiaPd.js";import"./NavbarContext-D7Y69-4c.js";import"./Button-BYq_pOI0.js";import"./index-NKt71_pR.js";import"./coderlity-D_SEMzZo.js";import"./avatar-6-Bjnhzl3_.js";import"./Offcanvas-B1fdAb66.js";import"./CardHeaderContext-D7wbeIzV.js";import"./Modal-Cl8y3l_e.js";import"./useWillUnmount-Db1aBOWc.js";import"./FormCheckInput-D0kmCXQY.js";function Q(r){const m=new Date(r).getTime(),c=Date.now(),t=Math.floor((c-m)/1e3),p=t,o=Math.round(t/60),l=Math.round(t/3600),a=Math.round(t/86400),d=Math.round(t/604800),n=Math.round(t/2600640),i=Math.round(t/31207680);return p<=60?"just now":o<=60?o===1?"one minute ago":`${o} minutes ago`:l<=24?l===1?"1 hour ago":`${l} hrs ago`:a<=7?a===1?"yesterday":`${a} days ago`:d<=4.3?d===1?"1 week ago":`${d} weeks ago`:n<=12?n===1?"1 month ago":`${n} months ago`:i===1?"1 year ago":`${i} years ago`}function X({contacts:r,pages:m=[]}){var f,j,g,C,b;const[c,t]=h.useState(!1),[p,o]=h.useState(0),{props:l}=F(),a=l.flash||{};let n=new URL(window.location.href).searchParams.get("search")||"";const{data:i,get:y,setData:x,processing:k}=P({search:n}),M=s=>{s.preventDefault(),i.search.length>=2&&y(route("admin.contact.index",{page:1,search:i.search}),{preserveState:!0,preserveScroll:!0})},S=s=>{s==="2"&&o(0),t(!1)},T=()=>{i.search.length!==0&&(x({search:""}),N.visit(`${U}/contact`,{method:"get"}))},L=s=>{I.success(s,{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:w})},D=s=>{N.visit(route("admin.contact.view",{id:s}))};return h.useEffect(()=>{if(a!=null&&a.success){const s=setTimeout(()=>{L(a==null?void 0:a.message)},200);return()=>{clearTimeout(s)}}},[a]),e.jsxs(h.Fragment,{children:[e.jsx($,{title:"Starter | Velzon - React Admin & Dashboard Template"}),e.jsxs("div",{className:"page-content",children:[e.jsxs(H,{fluid:!0,children:[e.jsx(O,{title:"Contact",pageTitle:"Contact Page",pageUrl:"/auth/console/contact",currentPage:"Manage"}),e.jsx(_,{children:e.jsx(V,{xs:12,children:e.jsxs(u,{children:[e.jsxs(u.Header,{className:"align-items-center d-flex",children:[e.jsx("h4",{className:"mb-0 card-title flex-grow-1",children:"Contact Manage"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"d-flex justify-content-sm-end",children:e.jsx("form",{onSubmit:M,children:e.jsxs("div",{className:"search-box ms-2 search-box-custom-width ",children:[e.jsx(z.Control,{type:"text",className:"form-control",placeholder:"Search by name, email or phone",value:i.search,onChange:s=>x("search",s.target.value),disabled:k}),e.jsx("i",{className:"ri-search-line search-icon"}),((f=i==null?void 0:i.search)==null?void 0:f.length)!==0&&e.jsx("i",{className:"ri-close-line close-cl-icon text-danger",onClick:T})]})})})})]}),e.jsxs(u.Body,{children:[e.jsx("div",{className:"live-preview",children:e.jsxs("div",{className:"table-responsive",children:[e.jsxs(G,{className:"mb-0 align-middle table-bordered table-hover table-striped table-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"ID"}),e.jsx("th",{scope:"col",children:"Name"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Phone"}),e.jsx("th",{scope:"col",children:"Service"}),e.jsx("th",{scope:"col",children:"Created At"}),e.jsx("th",{scope:"col",children:"Action"})]})}),e.jsxs("tbody",{children:[((j=r==null?void 0:r.data)==null?void 0:j.length)!==0&&((g=r==null?void 0:r.data)==null?void 0:g.map((s,v)=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-medium",children:(r.current_page-1)*10+v+1}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:s.service_type}),e.jsx("td",{children:e.jsx("p",{className:"mb-0 fs-11 fw-medium text-uppercase",children:e.jsxs("span",{children:[e.jsx("i",{className:"mdi mdi-clock-outline"})," ",Q(s.created_at)]})})}),e.jsx("td",{children:e.jsxs("div",{className:"flex-wrap gap-3 hstack",children:[e.jsx("span",{onClick:()=>D(s.id),className:"cursor-pointer link-primary fs-15",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("span",{onClick:()=>{o(s.id),t(!c)},className:"cursor-pointer link-danger fs-15",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},v))),((C=r==null?void 0:r.data)==null?void 0:C.length)===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,align:"center",className:"text-center fs-6 fw-semibold",children:"No data is available for this record in the database."})})]})]}),e.jsx(R,{modalType:"search",recordId:p,routeLink:"admin.contact.destroy",modalFlip:c,handleModalState:S})]})}),((b=r==null?void 0:r.data)==null?void 0:b.length)!==0&&e.jsx("div",{className:"mt-3 d-flex justify-content-sm-end",children:e.jsx(E,{pages:m})})]})]})})})]}),e.jsx(B,{position:"top-right",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",transition:w})]})]})}X.layout=r=>e.jsx(A,{children:r});export{X as default};

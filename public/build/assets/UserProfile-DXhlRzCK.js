import{G as se,r as m,X as ae,j as e,S as re,A as P}from"./app-CWG8IO2g.js";import{p as oe}from"./profile-bg-XcrrQZYY.js";import{b as te}from"./avatar-6-Bjnhzl3_.js";import{Q as le,F as D,B}from"./ReactToastify-DPvZpB58.js";import{S as O}from"./index-NKt71_pR.js";import{c as g,b as ne}from"./country-D2C42wJD.js";import{L as ie}from"./index-BwTLAyBI.js";import{p as E,T as f}from"./RightSidebar-ySHiCkj3.js";import{C as ce}from"./Container--jlZg8Hy.js";import{F as a}from"./Form-ScOPmmIk.js";import{R as v}from"./Row-V_FQxnkM.js";import{C as o}from"./Col-DCMVYQ7v.js";import{C as p}from"./Card-tM-bCJo_.js";import{N as x}from"./Offcanvas-B1fdAb66.js";import{D as d}from"./Dropdown-DmSjolbV.js";import{I as T}from"./Image-CmmxrpiE.js";import"./index-BID9k8xX.js";import"./reselect-CiXCCDx7.js";import"./coderlity-D_SEMzZo.js";import"./Button-BYq_pOI0.js";import"./ThemeProvider-DQTmiaPd.js";import"./NavbarContext-D7Y69-4c.js";import"./FormCheckInput-D0kmCXQY.js";import"./CardHeaderContext-D7wbeIzV.js";const de=({user:r})=>{const j=new Date(r.created_at),A=`${j.getDate()} ${j.toLocaleString("en-GB",{month:"short"})}, ${j.getFullYear()}`;let $=g.find(s=>s.countryName==r.country)||{},U=g.find(s=>s.countryName==r.country)||{id:18,flagImg:ne,countryName:"Bangladesh",countryCode:"+880"};const{data:h,setData:l,post:H,put:K,processing:w,errors:t,setError:n}=se({name:r.name,phone:r.phone||"",country:r.country||"",phoneCountry:r.country||"Bangladesh",address:r.address||"",photo:"",current_password:"",password:"",password_confirmation:""}),[C,M]=m.useState(U),[R,k]=m.useState(!1),[b,S]=m.useState(""),J=(g||[]).filter(s=>s.countryName.toLowerCase().includes(b.toLowerCase())||s.countryCode.includes(b)),[N,G]=m.useState($),[y,F]=m.useState(""),Y=g.filter(s=>s.countryName.toLowerCase().includes(y.toLowerCase())||s.countryCode.includes(y)),{props:Q}=ae(),c=Q.flash||{},V=s=>{s.preventDefault(),H(route("user.dashboard.profileUpdate"),{preserveScroll:!0,onSuccess:()=>{l("photo",""),n("photo","")}})},W=s=>{s.preventDefault(),K(route("user.dashboard.profile.changePassword"),{preserveScroll:!0,onSuccess:()=>{l("current_password",""),n("current_password",""),l("password",""),n("password",""),l("password_confirmation",""),n("password_confirmation","")}})},X=s=>{P.post(route("user.dashboard.profile.changeBg"),{bgPhoto:s},{forceFormData:!0})},q=()=>{P.visit(route("user.dashboard.profile"))},z=s=>{M(s),l("phoneCountry",s.countryName),S(""),k(!1)},_=["phone","country","address","photo"],Z=_.reduce((s,i)=>r[i]&&r[i]!==""&&r[i]!=="avatar.png"?s+1:s,0);let u=65;const ee=35/_.length;u+=Z*ee,u=Math.round(u);const I=(s,i)=>{const L={position:"top-center",autoClose:i==="success"?1500:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"light",transition:D};i==="success"?B.success(s,L):B.warn(s,L)};return m.useEffect(()=>{if(!(c!=null&&c.message))return;const s=setTimeout(()=>{c.success?I(c.message,"success"):c.error&&I(c.message,"error")},350);return()=>clearTimeout(s)},[c]),e.jsxs(m.Fragment,{children:[e.jsx(re,{title:"Profile Settings | Coderlity Software Agency - Admin Dashboard"}),e.jsx("div",{className:"page-content",children:e.jsxs(ce,{fluid:!0,children:[e.jsx("div",{className:"position-relative mx-n4 mt-n4",children:e.jsxs("div",{className:"profile-wid-bg profile-setting-img",children:[e.jsx("img",{src:r.bg_photo=="bg.png"?oe:`${E}/customer/background/${r.bg_photo}`,className:"profile-wid-img",alt:r.bg_photo}),e.jsx("div",{className:"overlay-content",children:e.jsx("div",{className:"p-3 text-end",children:e.jsxs("div",{className:"p-0 ms-auto rounded-circle profile-photo-edit",children:[e.jsx(a.Control,{id:"profile-foreground-img-file-input",type:"file",onChange:s=>{X(s.target.files[0])},className:"profile-foreground-img-file-input"}),e.jsxs(a.Label,{htmlFor:"profile-foreground-img-file-input",className:"profile-photo-edit btn btn-light",children:[e.jsx("i",{className:"align-bottom ri-image-edit-line me-1"})," ","Change Cover"]})]})})})]})}),e.jsxs(v,{children:[e.jsxs(o,{xxl:3,children:[e.jsx(p,{className:"mt-n5",children:e.jsx(p.Body,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mx-auto mb-4 profile-user position-relative d-inline-block",children:[e.jsx("img",{src:r.photo=="avatar.png"?te:`${E}/customer/user/${r.photo}`,className:"rounded-circle avatar-xl img-thumbnail user-profile-image",alt:"user-profile"}),e.jsxs("div",{className:"p-0 avatar-xs rounded-circle profile-photo-edit",children:[e.jsx(a.Control,{id:"profile-img-file-input",type:"file",onChange:s=>{l("photo",s.target.files[0]),n("photo","")},className:"profile-img-file-input"}),e.jsx(a.Label,{htmlFor:"profile-img-file-input",className:"profile-photo-edit avatar-xs",children:e.jsx("span",{className:"avatar-title rounded-circle bg-light text-body",children:e.jsx("i",{className:"ri-camera-fill"})})})]})]}),e.jsx("h5",{className:"mb-1 fs-16",children:r.name})]})})}),e.jsx(p,{children:e.jsxs(p.Body,{children:[e.jsx("div",{className:"mb-5 d-flex align-items-center",children:e.jsx("div",{className:"flex-grow-1",children:e.jsx("h5",{className:"mb-0 card-title",children:"Complete Your Profile"})})}),e.jsx("div",{className:"progress animated-progress custom-progress progress-label",children:e.jsx("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:`${u}%`},children:e.jsxs("div",{className:"label",children:[u,"%"]})})})]})})]}),e.jsx(o,{xxl:9,children:e.jsx(p,{className:"mt-xxl-n5",children:e.jsxs(f.Container,{defaultActiveKey:"personal-details",children:[e.jsx(p.Header,{children:e.jsxs(x,{className:"rounded nav-tabs-custom card-header-tabs border-bottom-0",role:"tablist",children:[e.jsx(x.Item,{children:e.jsxs(x.Link,{eventKey:"personal-details",children:[e.jsx("i",{className:"fas fa-home"}),"Personal Details"]})}),r.provider_token==null&&e.jsx(x.Item,{children:e.jsxs(x.Link,{eventKey:"change-password",children:[e.jsx("i",{className:"far fa-user"}),"Change Password"]})})]})}),e.jsx(p.Body,{className:"p-4",children:e.jsxs(f.Content,{children:[e.jsx(f.Pane,{eventKey:"personal-details",children:e.jsx(a,{onSubmit:V,children:e.jsxs(v,{children:[e.jsx(o,{lg:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"firstnameInput",className:"form-label",children:"Name"}),e.jsx(a.Control,{type:"text",className:"form-control",id:"firstnameInput",value:h.name,onChange:s=>{l("name",s.target.value),n("name","")},placeholder:"Enter your firstname"}),t.name&&e.jsx(a.Control.Feedback,{type:"invalid",className:"mt-2 d-block",children:t.name})]})}),e.jsx(o,{lg:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"emailInput",className:"form-label",children:"Email Address"}),e.jsx(a.Control,{type:"email",className:"form-control",id:"emailInput",value:r.email,readOnly:!0,placeholder:"Enter your email"})]})}),e.jsx(o,{lg:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"phoneNumberInput",children:"Phone Number"}),e.jsxs(d,{show:R,onToggle:s=>k(s),className:"input-group",children:[e.jsxs(d.Toggle,{as:"button",type:"button",className:"border btn btn-light arrow-none",children:[e.jsx("img",{src:C.flagImg,alt:"country flag",className:"options-flagimg",height:"20"}),e.jsx("span",{className:"countrylist-codeno text-muted ms-2",children:C.countryCode})]}),e.jsx("input",{type:"tel",id:"phoneNumberInput",value:h.phone,onChange:s=>{l("phone",s.target.value),n("phone","")},className:"form-control rounded-end flag-input",placeholder:"1745 145199"}),e.jsxs(d.Menu,{as:"div",className:"mb-0 list-unstyled w-100 dropdown-menu-list",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"p-2 px-3 pt-1 searchlist-input",children:e.jsx(a.Control,{type:"text",className:"form-control-sm search-countryList",placeholder:"Search country name or country code...",value:b,onChange:s=>S(s.target.value),onClick:s=>s.stopPropagation()})}),e.jsx(O,{style:{maxHeight:"220px"},className:"",children:(J||[]).map((s,i)=>e.jsxs(d.Item,{as:"div",onClick:()=>z(s),className:"dropdown-item d-flex",style:{cursor:"pointer"},children:[e.jsx("div",{className:"flex-shrink-0 me-2",children:e.jsx("img",{src:s.flagImg,alt:"country flag",className:"options-flagimg",height:"20"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("div",{className:"country-name me-1",children:s.countryName}),e.jsx("span",{className:"countrylist-codeno text-muted",children:s.countryCode})]})})]},i))})]})]}),t.phone&&e.jsx(a.Control.Feedback,{type:"invalid",className:"mt-2 d-block",children:t.phone})]})}),e.jsx(o,{lg:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"countryinput",children:"Country"}),e.jsxs(d,{className:"w-100",children:[e.jsx(d.Toggle,{as:"button",type:"button",id:"countryinput",className:"cTogglePadding form-control d-flex justify-content-between align-items-center",children:e.jsxs("div",{className:"d-flex align-items-center",children:[N.flagImg&&e.jsx(T,{src:N.flagImg,alt:"country flag",height:20,width:30,className:"me-2"}),e.jsx("span",{children:N.countryName||"Select country"})]})}),e.jsxs(d.Menu,{as:"ul",className:"mb-0 list-unstyled w-100 dropdown-menu-list",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"px-3 py-2 searchlist-input",children:e.jsx(a.Control,{type:"text",placeholder:"Search country name or code...",className:"form-control-sm search-countryList",value:y,onChange:s=>F(s.target.value)})}),e.jsx(O,{style:{maxHeight:"220px"},children:Y.map((s,i)=>e.jsxs(d.Item,{as:"li",onClick:()=>{G(s),F(""),l("country",s.countryName),n("country","")},className:"dropdown-item customPaddingLi d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(T,{src:s.flagImg,alt:"country flag",className:"options-flagimg",height:20,width:30})}),e.jsx("div",{className:"flex-grow-1",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"country-name ",children:s.countryName}),e.jsx("span",{className:"countrylist-codeno text-muted",children:s.countryCode})]})})]},i))})]})]})]})}),e.jsx(o,{lg:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"JoiningdatInput",className:"form-label",children:"Joining Date"}),e.jsx(a.Control,{type:"text",className:"form-control",id:"JoiningdatInput",value:A,readOnly:!0,placeholder:"Enter your email"})]})}),e.jsx(o,{lg:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"skillsInput",className:"form-label",children:"Status"}),e.jsx("select",{defaultValue:r.status,onMouseDown:s=>s.preventDefault(),className:"mb-3 form-select dropdownstop",children:e.jsx("option",{value:r.status,children:"Active"})})]})}),e.jsx(o,{lg:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"designationInput",className:"form-label",children:"Address"}),e.jsx(a.Control,{type:"text",className:"form-control",id:"designationInput",placeholder:"address",value:h.address,onChange:s=>{l("address",s.target.value),n("address","")}}),t.address&&e.jsx(a.Control.Feedback,{type:"invalid",className:"mt-2 d-block",children:t.address})]})}),e.jsx(o,{lg:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(a.Label,{htmlFor:"websiteInput1",className:"form-label",children:"Website"}),e.jsx(a.Control,{type:"text",readOnly:!0,className:"form-control",id:"websiteInput1",placeholder:"www.example.com",value:"www.coderlity.com"}),t.photo&&e.jsx(a.Control.Feedback,{type:"invalid",className:"mt-2 d-block",children:t.photo})]})}),e.jsx(o,{lg:12,children:e.jsxs("div",{className:"gap-2 hstack justify-content-end",children:[e.jsx("button",{type:"submit",disabled:w,className:"btn btn-primary",children:"Update"}),e.jsx("button",{type:"button",onClick:q,className:"btn btn-soft-success",children:"Cancel"})]})})]})})}),r.provider_token==null&&e.jsx(f.Pane,{eventKey:"change-password",children:e.jsx(a,{onSubmit:W,children:e.jsxs(v,{className:"g-2",children:[e.jsx(o,{lg:4,children:e.jsxs("div",{children:[e.jsx(a.Label,{htmlFor:"current_password",className:"form-label",children:"Old Password*"}),e.jsx(a.Control,{id:"current_password",type:"password",name:"current_password",className:"form-control",value:h.current_password,onChange:s=>{l("current_password",s.target.value),n("current_password","")},placeholder:"Enter current password"}),t.current_password&&e.jsx(a.Control.Feedback,{type:"invalid",className:"mt-2 d-block",children:t.current_password})]})}),e.jsx(o,{lg:4,children:e.jsxs("div",{children:[e.jsx(a.Label,{htmlFor:"password",className:"form-label",children:"New Password*"}),e.jsx(a.Control,{id:"password",type:"password",name:"password",className:"form-control",value:h.password,onChange:s=>{l("password",s.target.value),n("password","")},placeholder:"Enter new password"}),t.password&&e.jsx(a.Control.Feedback,{type:"invalid",className:"mt-2 d-block",children:t.password})]})}),e.jsx(o,{lg:4,children:e.jsxs("div",{children:[e.jsx(a.Label,{htmlFor:"password_confirmation",className:"form-label",children:"Confirm Password*"}),e.jsx(a.Control,{id:"password_confirmation",type:"password",name:"password_confirmation",className:"form-control",value:h.password_confirmation,onChange:s=>{l("password_confirmation",s.target.value),n("password_confirmation","")},placeholder:"Confirm password"}),t.password_confirmation&&e.jsx(a.Control.Feedback,{type:"invalid",className:"mt-2 d-block",children:t.password_confirmation})]})}),e.jsx(o,{lg:12,children:e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",disabled:w,className:"btn btn-success",children:"Change Password"})})})]})})})]})})]})})})]}),e.jsx(le,{position:"top-right",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",transition:D})]})})]})};de.layout=r=>e.jsx(ie,{children:r});export{de as default};
